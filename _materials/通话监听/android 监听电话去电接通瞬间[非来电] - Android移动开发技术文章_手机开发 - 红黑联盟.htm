<!DOCTYPE html PUBliC "-//W3C//dtD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/dtD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<link rel="stylesheet" href="http://www.2cto.com/statics/css/article.css" type="text/css" />

<link href="http://www.2cto.com/statics/css/dialog.css" rel="stylesheet" type="text/css" />
<title>android 监听电话去电接通瞬间[非来电]  - Android移动开发技术文章_手机开发 - 红黑联盟</title>
<meta name="keywords" content="android,监听,电话" />
<meta name="description" content="首先感叹一下android强大，它可以把同一个apk里面得不同Actvity分别运行在不同的进程中，比如我想让自己的应用中Activity运行在Phone进程中，那么我需要做三个事情。本文包含三个知识点：1.监听去电接通 2.apk获..." />
<script type="text/javascript" src="http://www.2cto.com/statics/js/jquery.min.js"></script>
<script type="text/javascript" src="http://www.2cto.com/statics/js/jquery.sgallery.js"></script>
<script type="text/javascript" src="http://www.2cto.com/statics/js/search_common.js"></script>
<script type="text/javascript" src="http://cbjs.baidu.com/js/m.js"></script>
<script type="text/javascript" src="http://www.2cto.com/statics/js/json.js"></script>
<script language="javascript" type="text/javascript" src="http://www.2cto.com/statics/js/dialog.js"></script>
<script language="javascript" type="text/javascript" src="http://www.2cto.com/statics/js/syntaxhighlighter.js"></script>
<link type="text/css" rel="stylesheet" href="http://www.2cto.com/statics/js/syntaxhighlighter/styles/shCore.css"/>
<link type="text/css" rel="stylesheet" href="http://www.2cto.com/statics/js/syntaxhighlighter/styles/shThemeDefault.css"/>
<script type="text/javascript">SyntaxHighlighter.all();</script>


</head>

<body>
<div class="line_top_box">
	<dl class="top_box_left">
		<dd class="left_logo"><a href="http://www.2cto.com"></a></dd>
		<dd class="left_menu_link">
																<a class='Channel' href='/News/'>资讯</a>&nbsp;|&nbsp;
													<a class='Channel' href='/Article/'>安全</a>&nbsp;|&nbsp;
													<a class='Channel' href='http://bbs.2cto.com'>论坛</a>&nbsp;|&nbsp;
													<a class='Channel' href='/Soft/'>下载</a>&nbsp;|&nbsp;
													<a class='Channel' href='http://book.2cto.com'>读书</a>&nbsp;|&nbsp;
													<a class='Channel' href='/kf/'>程序开发</a>&nbsp;|&nbsp;
													<a class='Channel' href='/database/'>数据库</a>&nbsp;|&nbsp;
													<a class='Channel' href='/os/'>系统</a>&nbsp;|&nbsp;
													<a class='Channel' href='/net/'>网络</a>&nbsp;|&nbsp;
													<a class='Channel' href='/ebook/'>电子书</a>&nbsp;|&nbsp;
													<a class='Channel' href='/weixin/'>微信学院</a>&nbsp;|&nbsp;
													<a class='Channel' href='http://zz.2cto.com/'>站长学院</a>&nbsp;|&nbsp;
													<a class='Channel' href='/ym/'>源码</a>&nbsp;|&nbsp;
													<a class='Channel' href='/QQ/'>QQ</a>&nbsp;|&nbsp;
													<a class='Channel' href='http://space.2cto.com'>专栏</a>&nbsp;|&nbsp;
													<a class='Channel' href='/px/'>考试</a>&nbsp;|&nbsp;
														</dd>
	</dl>
</div>
<div class="line_top_lmbox">
	<dl class="lmpic"></dl>
	<dl class="lmlinkbox"><dd>
										<a class='Channel' href='http://www.2cto.com/kf/ware/'>软件开发</a>|
							<a class='Channel' href='http://www.2cto.com/kf/qianduan/'>web前端</a>|
							<a class='Channel' href='http://www.2cto.com/kf/web/'>Web开发</a>|
							<a class='Channel' href='http://www.2cto.com/kf/yidong/'>移动开发</a>|
							<a class='Channel' href='http://www.2cto.com/kf/all/'>综合编程</a>|
								</dd></dl>
	<dl class="LoginBox"><dd><script type="text/javascript">document.write('<iframe src="http://www.2cto.com/index.php?m=member&c=index&a=mini&forward='+encodeURIComponent(location.href)+'&siteid=1" allowTransparency="true"  width="150" height="32" frameborder="0" scrolling="no"></iframe>')</script></dd></dl>
</div>
<div class="divline8"></div>
<div class="tadv">

<a target="_blank" href="http://vip.2cto.com/"><img src="http://www.2cto.com/adv/980-80.gif" width="980" height="90" /></a>
<!-- 广告位：顶部banner -->
<script type="text/javascript">BAIDU_CLB_fillSlot("298612");</script>

</div>


<div class="divline8"></div>
<div class="it165_box">
	<div class="box_left">
		
		<dl class="box_p">
			<dd class="pRight"><a href="http://www.2cto.com">首页</a><span> > </span><a href="http://www.2cto.com/kf/">程序开发</a> > <a href="http://www.2cto.com/kf/yidong/">移动开发</a> > <a href="http://www.2cto.com/kf/yidong/Android/">Android</a> >  正文</dd>
			<script type="text/javascript">BAIDU_CLB_fillSlot("703722");</script>
			</dl>
		<dl class="box_t"><dd>android 监听电话去电接通瞬间[非来电] </dd></dl>
																										<dl class="box_INFO">
			<dd class="frinfo line_blue">2013-06-21  &nbsp;&nbsp;&nbsp;&nbsp;
<a style="font-weight:bold;padding:5px 0px 5px 20px;background:url('http://www.2cto.com/statics/images/icon/user_comment.png') left center no-repeat" href="#SOHUCS" id="changyan_count_unit"></a><a href="#SOHUCS">&nbsp;个评论</a>
<script type="text/javascript" src="http://assets.changyan.sohu.com/upload/plugins/plugins.count.js"></script>


&nbsp;&nbsp;  &nbsp;&nbsp;  作者：nexttake</dd>
			<dd class="frsize line_blue">
			<span id='favorite'>
				<a href="javascript:;" onclick="add_favorite('android 监听电话去电接通瞬间[非来电] ');" class="t6">收藏</a>
			</span>&nbsp;&nbsp;
				<a target="_blank" href="http://www.2cto.com/index.php?m=member&c=content&a=publish&modid=1&siteid=1"><img border="0" src="http://www.2cto.com/statics/images/dl.jpg" />我要投稿</a>
			</dd>
			
		</dl>
		<dl class="box_body" id="fontzoom"><dd id="Article">
		<p>首先感叹一下android强大，它可以把同一个apk里面得不同Actvity分别运行在不同的进程中，比如我想让自己的应用中Activity运行在Phone进程中，那么我需要做三个事情。</p>
<p>本文包含三个知识点：</p>
<p>1.监听去电接通&nbsp;&nbsp;&nbsp;&nbsp; 2.apk获取root权限 3. 运行时将apk push 到system/app</p>
<p>(1)</p>
<p>&nbsp;</p>
<p>[java]<br />
&lt;activity&nbsp;&nbsp;&nbsp;<br />
ndroid:process=&quot;com.android.phone&quot;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; android:label=&quot;@string/app_name&quot;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; android:name=&quot;.AutoCallActivity&quot; &gt;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/activity&gt;&nbsp;&nbsp;&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; &lt;activity&nbsp;<br />
&nbsp;&nbsp; android:process=&quot;com.android.phone&quot;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; android:label=&quot;@string/app_name&quot;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; android:name=&quot;.AutoCallActivity&quot; &gt;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/activity&gt;&nbsp; (2)</p>
<p><br />
[java]<br />
&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp; package=&quot;com.spreadst.drag&quot;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp; coreApp=&quot;true&quot;&nbsp;&nbsp;&nbsp;<br />
oid:sharedUserId=&quot;android.uid.system&quot;&nbsp;<br />
&nbsp;&nbsp;&nbsp; android:versionCode=&quot;1&quot;&nbsp;&nbsp;&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; package=&quot;com.spreadst.drag&quot;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; coreApp=&quot;true&quot;&nbsp;<br />
android:sharedUserId=&quot;android.uid.system&quot;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; android:versionCode=&quot;1&quot;&nbsp;<br />
(3) [java]<br />
&nbsp;&nbsp; LOCAL_PACKAGE_NAME := autocall&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp; #LOCAL_CERTIFICATE := shared&nbsp;&nbsp;&nbsp;<br />
LOCAL_CERTIFICATE := platform&nbsp;&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; LOCAL_PACKAGE_NAME := autocall&nbsp;<br />
&nbsp;&nbsp;&nbsp; #LOCAL_CERTIFICATE := shared&nbsp;<br />
LOCAL_CERTIFICATE := platform 为什么会有这个需求呢？TelephonyManager 中状态 只有&nbsp; IDLE 空闲状态， 来电接通状态 ，拨打状态，没有去电接通状态，参考phone中得实现如下：<br />
Phone&nbsp; phone = PhoneFactory.getDefaultPhone();<br />
这个调用是不能运行在phone以外的进程中的，不信你可以试一下，请记住一个进程的主线程的looper是唯一的</p>
<p>原因如下：</p>
<p>[java]<br />
if (sLooper != Looper.myLooper()) {&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new RuntimeException(&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;PhoneFactory.getDefaultPhone must be called from Looper thread&quot;);&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;</p>
<p>if (sLooper != Looper.myLooper()) {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new RuntimeException(<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;PhoneFactory.getDefaultPhone must be called from Looper thread&quot;);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }去电接通若干秒之后挂断代码如下，由于使用了hide class，所以必须在android源代码底下编译，当然你也可以通过反射、AIDL、class.jar等方式解决这个问题。</p>
<p><br />
[java]<br />
CallManager mCM = CallManager.getInstance();&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp; Phone&nbsp; phone = PhoneFactory.getDefaultPhone();&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;<br />
mCM.registerPhone(phone);&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mCM.registerForPreciseCallStateChanged(mHandler, PHONE_STATE_CHANGED, null);&nbsp;&nbsp;</p>
<p>CallManager mCM = CallManager.getInstance();&nbsp;<br />
&nbsp;&nbsp; Phone&nbsp; phone = PhoneFactory.getDefaultPhone();&nbsp;<br />
&nbsp;<br />
mCM.registerPhone(phone);&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mCM.registerForPreciseCallStateChanged(mHandler, PHONE_STATE_CHANGED, null);<br />
[java]<br />
private Handler mHandler=new Handler(){&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void handleMessage(android.os.Message msg) {&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; switch (msg.what) {&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case PHONE_STATE_CHANGED:&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; updatePhoneSateChange();&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; default:&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp; };&nbsp;&nbsp;&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; private Handler mHandler=new Handler(){&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void handleMessage(android.os.Message msg) {&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; switch (msg.what) {&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case PHONE_STATE_CHANGED:&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; updatePhoneSateChange();&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; default:&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };&nbsp;<br />
[java]<br />
private void updatePhoneSateChange(){&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Call fgCall = mCM.getActiveFgCall();&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (mCM.hasActiveRingingCall()) {&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fgCall = mCM.getFirstActiveRingingCall();&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; final Call.State state = fgCall.getState();&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; switch (state) {&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case IDLE:&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case ACTIVE://去电接通&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Log.d(&quot;yzy&quot;,&quot;ACTVIE&quot;);&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; final Timer timer = new Timer();&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(mode == Mode.mode2){&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; timer.schedule(new TimerTask() {&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; @Override&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void run() {&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try {&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Log.d(&quot;yzy&quot;, &quot;endcall()&quot;);&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mITelephony.endCall();&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; timer.cancel();&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch (RemoteException e) {&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }, holdonDuration * 1000, holdonDuration * 1000);&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //mITelephony.endCall();&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; default:&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; private void updatePhoneSateChange(){&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Call fgCall = mCM.getActiveFgCall();&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (mCM.hasActiveRingingCall()) {&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fgCall = mCM.getFirstActiveRingingCall();&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; final Call.State state = fgCall.getState();&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; switch (state) {&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case IDLE:&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case ACTIVE://去电接通&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Log.d(&quot;yzy&quot;,&quot;ACTVIE&quot;);&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; final Timer timer = new Timer();&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(mode == Mode.mode2){&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; timer.schedule(new TimerTask() {&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; @Override&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void run() {&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try {&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Log.d(&quot;yzy&quot;, &quot;endcall()&quot;);&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mITelephony.endCall();&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; timer.cancel();&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch (RemoteException e) {&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }, holdonDuration * 1000, holdonDuration * 1000);&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //mITelephony.endCall();&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; default:&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;<br />
如果你将这个apk 简单的install 会报告如下错误：不存在该共享用户或签名不匹配，这是因为[java] view plaincopyprint?android:sharedUserId=&quot;android.uid.system&quot;&nbsp;</p>
<p>android:sharedUserId=&quot;android.uid.system&quot;必须放到system/app目录下才能工作。这就由牵扯出了两个问题，临时获取root权限与运行时拷贝.</p>
<p>其他关键代码：</p>
<p><br />
[java]<br />
private ITelephony mITelephony;&nbsp;<br />
mITelephony = ITelephony.Stub.asInterface(ServiceManager&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .getService(Context.TELEPHONY_SERVICE));&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mPhoneStateListener = getPhoneStateListener();&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ((TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE)).listen(&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mPhoneStateListener, PhoneStateListener.LISTEN_CALL_STATE);&nbsp;<br />
private PhoneStateListener getPhoneStateListener() {&nbsp;<br />
&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new PhoneStateListener() {&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; @Override&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void onCallStateChanged(int state, String incomingNumber) {&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try {&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Log.d(&quot;yzy&quot;,&quot; state: &quot;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; + mITelephony.getCallState());&nbsp;<br />
&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch (RemoteException e) {&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;<br />
&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };&nbsp;<br />
&nbsp;<br />
&nbsp;&nbsp;&nbsp; }&nbsp;</p>
						</dd></dl>
		<script type="text/javascript">
		<!--
		$(function(){
		  $('#Article img').LoadImage(true, 630, 560,'http://www.2cto.com/statics/images/s_nopic.gif');    
		})
		
		//-->
		</script>
	<div id="pages" class="box_body" id="fontzoom">	</div>
	<dl style="width:650px;height:100px;padding-top:10px;float:left;padding-left:10px">
		<dd><script type="text/javascript">BAIDU_CLB_fillSlot("771048");</script></dd>
	</dl>
	<dl class="box_Nsc">
		<dd class="lcopy"><a class="ckcopy" onclick="copyToClipBoard()">点击复制链接 与好友分享!</a><a class="ckhome" href="http://www.2cto.com/">回本站首页</a></dd>
		<script> 
		function copyToClipBoard(){ 
		var clipBoardContent=document.title + '\r\n' + document.location; 
		clipBoardContent+='\r\n'; 
		window.clipboardData.setData("Text",clipBoardContent); 
		alert("恭喜您！复制成功"); 
		} 
		</script>

		<div class="Article-Tool">
  <div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a><a href="#" class="bds_mshare" data-cmd="mshare" title="分享到一键分享"></a></div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
                                
	  </div>

		
		</dd>
		<dd class="bbstt">您对本文章有什么意见或着疑问吗？请到<a href="http://bbs.2cto.com/">论坛讨论</a>您的关注和建议是我们前行的参考和动力&nbsp;&nbsp; </dd>
	</dl>
	<dl class="box_NPre">
		<dd class="TLineX"><strong>上一篇：</strong><a href="http://www.2cto.com/kf/201306/221461.html">Android事件分发机制完全解析，带你从源码的角度彻底理解(上) </a></dd>
		<dd><strong>下一篇：</strong><a href="http://www.2cto.com/kf/201306/221598.html">Android之Handler高级 </a></dd>
	</dl>
	<dl class="linetb"></dl>
	<dl class="about"><dd>相关文章</dd></dl>
				<div class="alistline"><a href="http://www.2cto.com/kf/201009/73242.html" target=blank>android C编程技巧 及 C/C++开发测试</a></div>
			<div class="alistline"><a href="http://www.2cto.com/kf/201009/74405.html" target=blank>Java程序移植到android上问题解决小结</a></div>
			<div class="alistline"><a href="http://www.2cto.com/kf/201101/81716.html" target=blank>Android入门第一篇</a></div>
			<div class="alistline"><a href="http://www.2cto.com/kf/201101/81717.html" target=blank>Android入门第二篇之LinearLayout、Ab</a></div>
			<div class="alistline"><a href="http://www.2cto.com/kf/201101/81718.html" target=blank>Android入门第三篇之RelativeLayout、</a></div>
			<div class="alistline"><a href="http://www.2cto.com/kf/201101/81719.html" target=blank>Android入门第四篇之TableLayout (一)</a></div>
			<div class="alistline"><a href="http://www.2cto.com/kf/201101/81720.html" target=blank>Android入门第五篇之TableLayout (二)</a></div>
			<div class="alistline"><a href="http://www.2cto.com/kf/201101/81721.html" target=blank>Android入门第六篇之ListView (一)</a></div>
			<div class="alistline"><a href="http://www.2cto.com/kf/201101/81722.html" target=blank>Android入门第七篇之ListView (二)</a></div>
			<div class="alistline"><a href="http://www.2cto.com/kf/201101/81723.html" target=blank>Android入门第八篇之GridView(九宫图)</a></div>
			<dl class="linetb"></dl>
	<dl style="width:650px;height:70px;padding-top:10px;float:left;padding-left:10px">
		<dd><script type="text/javascript">BAIDU_CLB_fillSlot("182716");</script></dd>
	</dl>

	<dl style="width:650px;float:left;padding-left:10px">
		<dd><script type="text/javascript">BAIDU_CLB_fillSlot("517916");</script></dd>
	</dl>
	<dl class="linetb"></dl>
	<dl class="about"><dd>图文推荐</dd></dl>
	<div class="picbox">
						<dl class="wbox">
			<dd class="npicbox"><a target="_blank" href="http://www.2cto.com/kf/201502/377782.html"><img src='http://www.2cto.com/uploadfile/Collfiles/20150215/thumb_126_90_2015021508392038.png'  width='126' height='90' border='0' /></a></dd>
			<dd class="npictext"><a href="http://www.2cto.com/kf/201502/377782.html">Android中数据存储方</a></dd>
		</dl>
				<dl class="wbox">
			<dd class="npicbox"><a target="_blank" href="http://www.2cto.com/kf/201502/377370.html"><img src='http://www.2cto.com/uploadfile/Collfiles/20150213/thumb_126_90_2015021308373538.png'  width='126' height='90' border='0' /></a></dd>
			<dd class="npictext"><a href="http://www.2cto.com/kf/201502/377370.html">Android OTA升级包制</a></dd>
		</dl>
				<dl class="wbox">
			<dd class="npicbox"><a target="_blank" href="http://www.2cto.com/kf/201502/376977.html"><img src='http://www.2cto.com/uploadfile/Collfiles/20150211/thumb_126_90_20150211085541109.png'  width='126' height='90' border='0' /></a></dd>
			<dd class="npictext"><a href="http://www.2cto.com/kf/201502/376977.html">Android从普通发送和</a></dd>
		</dl>
				<dl class="wbox">
			<dd class="npicbox"><a target="_blank" href="http://www.2cto.com/kf/201502/376970.html"><img src='http://www.2cto.com/uploadfile/Collfiles/20150211/thumb_126_90_20150211085554125.gif'  width='126' height='90' border='0' /></a></dd>
			<dd class="npictext"><a href="http://www.2cto.com/kf/201502/376970.html">Android开发：Parall</a></dd>
		</dl>
					</div>
	

<!--高速版，加载速度快，使用前需测试页面的兼容性-->
<div id="SOHUCS"></div>
<script>
  (function(){
    var appid = 'cyrBEfE7C',
    conf = 'prod_830794cf494da8b808afb2994cfe0fee';
    var doc = document,
    s = doc.createElement('script'),
    h = doc.getElementsByTagName('head')[0] || doc.head || doc.documentElement;
    s.type = 'text/javascript';
    s.charset = 'utf-8';
    s.src =  'http://assets.changyan.sohu.com/upload/changyan.js?conf='+ conf +'&appid=' + appid;
    h.insertBefore(s,h.firstChild);
    window.SCS_NO_IFRAME = true;
  })()
</script> 


	<dl style="width:650px;float:left;padding-left:10px">
		<dd><script type="text/javascript">BAIDU_CLB_fillSlot("771057");</script></dd>
	</dl>
	</div>
	<div class="box_right">
		<div style="float:left;width:300px;background:white;padding-left:10px;height:250px">
			<a target="_blank" href="http://vip.2cto.com/"><img src="http://www.2cto.com/adv/300-250.gif" width="300" height="250" /></a></div>
		<div class="box_right_line"><div class="xline"></div></div>
		<div class="box_right_box">
			<dl class="bTitle"><dd onmousemove="m_tab(1)" id="indexW" class="tablinkschecked">排行</dd><dd onmousemove="m_tab(2)" id="hotW" class="tablinkscheck">热门</dd></dl>
		</div>
		<div class="box_right_box">
			<div class="paddingbox">
				<dl class="index" id="index">
					<dd class="picline"></dd>
															<dd class="list">279 | <a target="_blank" title="Android的AlertDialog详解 " href="http://www.2cto.com/kf/201205/131876.html">Android的AlertDialog详解 </a></dd>
										<dd class="list">217 | <a target="_blank" title="Android中的PopupWindow详解" href="http://www.2cto.com/kf/201205/131768.html">Android中的PopupWindow详解</a></dd>
										<dd class="list">192 | <a target="_blank" title="浅谈android的selector背景选择器" href="http://www.2cto.com/kf/201110/107866.html">浅谈android的selector背景选择器</a></dd>
										<dd class="list">153 | <a target="_blank" title="Android自定义Button按钮显示样式" href="http://www.2cto.com/kf/201108/100751.html">Android自定义Button按钮显示样式</a></dd>
										<dd class="list">144 | <a target="_blank" title="Android常用控件之FragmentTabHost的使用" href="http://www.2cto.com/kf/201309/242225.html">Android常用控件之FragmentTabHost的使</a></dd>
										<dd class="list">142 | <a target="_blank" title="Android ble 蓝牙4.0 总结一" href="http://www.2cto.com/kf/201411/349575.html">Android ble 蓝牙4.0 总结一</a></dd>
										<dd class="list">137 | <a target="_blank" title="Android中Cursor类的概念和用法 " href="http://www.2cto.com/kf/201109/103163.html">Android中Cursor类的概念和用法 </a></dd>
										<dd class="list">107 | <a target="_blank" title="Android之Service学习篇一：Service启动方式之startService" href="http://www.2cto.com/kf/201302/190157.html">Android之Service学习篇一：Service启</a></dd>
														</dl>
				<dl class="index" id="hot" style="display:none">
					<dd class="picline"></dd>
															<dd class="list"><a target="_blank" title="Android的AlertDialog详解 " href="http://www.2cto.com/kf/201205/131876.html">Android的AlertDialog详解 </a></dd>
										<dd class="list"><a target="_blank" title="Android中ADT插件的安装" href="http://www.2cto.com/kf/201202/120475.html">Android中ADT插件的安装</a></dd>
										<dd class="list"><a target="_blank" title="Android开发学习笔记：浅谈WebView" href="http://www.2cto.com/kf/201108/101518.html">Android开发学习笔记：浅谈WebView</a></dd>
										<dd class="list"><a target="_blank" title="浅谈android的selector背景选择器" href="http://www.2cto.com/kf/201110/107866.html">浅谈android的selector背景选择器</a></dd>
										<dd class="list"><a target="_blank" title=" Android开发学习笔记：浅谈GridView" href="http://www.2cto.com/kf/201108/101520.html"> Android开发学习笔记：浅谈GridView</a></dd>
										<dd class="list"><a target="_blank" title="Android之ActionBar学习" href="http://www.2cto.com/kf/201206/136813.html">Android之ActionBar学习</a></dd>
										<dd class="list"><a target="_blank" title="Android自定义Button按钮显示样式" href="http://www.2cto.com/kf/201108/100751.html">Android自定义Button按钮显示样式</a></dd>
										<dd class="list"><a target="_blank" title="Android中的PopupWindow详解" href="http://www.2cto.com/kf/201205/131768.html">Android中的PopupWindow详解</a></dd>
														</dl>
			</div>
			<script type="text/javascript">
			<!--
				function m_tab(index)
				{
					if (index == 1){
						document.getElementById("indexW").className = "tablinkschecked";
						document.getElementById("hotW").className = "tablinkscheck";
						document.getElementById("index").style.display = "block";
						document.getElementById("hot").style.display = "none";
					}
					else{
						document.getElementById("hotW").className = "tablinkschecked";
						document.getElementById("indexW").className = "tablinkscheck";
						document.getElementById("index").style.display = "none";
						document.getElementById("hot").style.display = "block";
					}
				}
			//-->
			</script>
		</div>
		<div class="rightlineT"><div class="rxline"></div></div>
		<div style="float:left;width:300px;background:white;padding-left:10px;height:60px">
				<!-- 广告位：内容页右侧小广告位 -->
			<script type="text/javascript">BAIDU_CLB_fillSlot("406189");</script>
		</div>
<div class="rightlineT"><div class="rxline"></div></div>
		<div style="float:left;width:300px;background:white;padding-left:10px;height:80px">
				<!-- 广告位：内容页右侧小广告位 -->
			<script type="text/javascript">BAIDU_CLB_fillSlot("703749");</script>
		</div>
		<div class="rightlineNo"></div>
		<div class="box_right_box">
			<dl class="bTitle borT"><dd class="newarc"></dd></dl>
		</div>
		<div class="box_right_box">
			<div class="paddingbox">
				<dl class="index">
					<iframe frameborder="0" name="Iframe1" src="http://www.2cto.com/bbsdy/index.html" width="100%" height="200">
				您的浏览器不支持嵌入式框架，或者当前配置为不显示嵌入式框架。
			</iframe>
				</dl>
			</div>
		</div>
                                <div class="rightlineT"><div class="rxline"></div></div>

		<div style="float:left;width:300px;background:white;padding-left:10px;height:250px"><script type="text/javascript">BAIDU_CLB_fillSlot("182692");</script> </div>
		<div class="box_right_line"><div class="xline"></div></div>
		<div class="box_right_box">
			<dl class="bTitle">
				<dd onmousemove="m_tabs(1)" id="ArticlesW" class="tablinkschecked">文章</dd>
				<dd onmousemove="m_tabs(2)" id="DownW" class="tablinkscheck">下载</dd>
				<dd onmousemove="m_tabs(3)" id="BookW" class="tablinkscheck">读书</dd>
			</dl>
		</div>
		<div class="box_right_box">
			<div class="paddingbox">
				<dl class="index" id="Articles">
					<dd class="picline"></dd>
															<dd class="list">・&nbsp;<a target="_blank" title="Win2000下关闭无用端口" href="http://www.2cto.com/Article/200410/1.html">Win2000下关闭无用端口</a></dd>
										<dd class="list">・&nbsp;<a target="_blank" title="禁止非法用户登录综合设置 [win9x篇]" href="http://www.2cto.com/Article/200410/2.html">禁止非法用户登录综合设置 [win9x篇]</a></dd>
										<dd class="list">・&nbsp;<a target="_blank" title="关上可恶的后门――消除NetBIOS隐患" href="http://www.2cto.com/Article/200410/3.html">关上可恶的后门――消除NetBIOS隐患</a></dd>
										<dd class="list">・&nbsp;<a target="_blank" title="网络入侵检测系统" href="http://www.2cto.com/Article/200410/4.html">网络入侵检测系统</a></dd>
										<dd class="list">・&nbsp;<a target="_blank" title="潜伏在Windows默认设置中的陷井" href="http://www.2cto.com/Article/200410/5.html">潜伏在Windows默认设置中的陷井</a></dd>
										<dd class="list">・&nbsp;<a target="_blank" title="调制解调器的不安全" href="http://www.2cto.com/Article/200410/6.html">调制解调器的不安全</a></dd>
										<dd class="list">・&nbsp;<a target="_blank" title="构建Windows 2000服务器的安全防护林" href="http://www.2cto.com/Article/200410/7.html">构建Windows 2000服务器的安全防护林</a></dd>
										<dd class="list">・&nbsp;<a target="_blank" title="SQL Server 2000的安全配置" href="http://www.2cto.com/Article/200410/8.html">SQL Server 2000的安全配置</a></dd>
														</dl>
				<dl class="index" id="Down" style="display:none">
					<dd class="picline"></dd>
															<dd class="list">・&nbsp;<a target="_blank" title="Windows优化大师注册机源码" href="http://www.2cto.com/soft/200409/53.html">Windows优化大师注册机源码</a></dd>
										<dd class="list">・&nbsp;<a target="_blank" title="Process Viewer 汉化版" href="http://www.2cto.com/soft/200409/62.html">Process Viewer 汉化版</a></dd>
										<dd class="list">・&nbsp;<a target="_blank" title="Aspcode动画教程" href="http://www.2cto.com/soft/200409/79.html">Aspcode动画教程</a></dd>
										<dd class="list">・&nbsp;<a target="_blank" title="WIN 2000服务器防止ICMP数据包攻击教程" href="http://www.2cto.com/soft/200409/128.html">WIN 2000服务器防止ICMP数据包攻击教程</a></dd>
										<dd class="list">・&nbsp;<a target="_blank" title="实现网络隐身的简单方法" href="http://www.2cto.com/soft/200409/129.html">实现网络隐身的简单方法</a></dd>
										<dd class="list">・&nbsp;<a target="_blank" title="手工进行克隆帐号" href="http://www.2cto.com/soft/200409/130.html">手工进行克隆帐号</a></dd>
										<dd class="list">・&nbsp;<a target="_blank" title="用W32DASM破解网页合并器的密码" href="http://www.2cto.com/soft/200409/134.html">用W32DASM破解网页合并器的密码</a></dd>
										<dd class="list">・&nbsp;<a target="_blank" title="注册表操作动画教程" href="http://www.2cto.com/soft/200409/138.html">注册表操作动画教程</a></dd>
														</dl>
				<dl class="index" id="Book" style="display:none">
					<dd class="picline"></dd>
															<dd class="list">・&nbsp;<a target="_blank" title="黑客攻防技术宝典：Web实战篇（第2版）" href="http://book.2cto.com/201206/20.html">黑客攻防技术宝典：Web实战篇（第2版）</a></dd>
										<dd class="list">・&nbsp;<a target="_blank" title="超级网管员――网络安全" href="http://book.2cto.com/201207/43.html">超级网管员――网络安全</a></dd>
										<dd class="list">・&nbsp;<a target="_blank" title="代码大全（第二版）" href="http://book.2cto.com/201207/64.html">代码大全（第二版）</a></dd>
										<dd class="list">・&nbsp;<a target="_blank" title="软件之道:软件开发争议问题剖析" href="http://book.2cto.com/201207/68.html">软件之道:软件开发争议问题剖析</a></dd>
										<dd class="list">・&nbsp;<a target="_blank" title="CSS插件工具箱" href="http://book.2cto.com/201207/78.html">CSS插件工具箱</a></dd>
										<dd class="list">・&nbsp;<a target="_blank" title="CSS入门经典(第3版)" href="http://book.2cto.com/201207/139.html">CSS入门经典(第3版)</a></dd>
										<dd class="list">・&nbsp;<a target="_blank" title="C#并行编程高级教程：精通.NET 4 Parallel Extension" href="http://book.2cto.com/201207/169.html">C#并行编程高级教程：精通.NET 4 Pa</a></dd>
										<dd class="list">・&nbsp;<a target="_blank" title="CMMI+敏捷整合开发" href="http://book.2cto.com/201207/190.html">CMMI+敏捷整合开发</a></dd>
														</dl>
			</div>
			<script type="text/javascript">
			<!--
				function m_tabs(index)
				{
					if (index == 1){
						document.getElementById("ArticlesW").className = "tablinkschecked";
						document.getElementById("DownW").className = "tablinkscheck";
						document.getElementById("BookW").className = "tablinkscheck";
						document.getElementById("Articles").style.display = "block";
						document.getElementById("Down").style.display = "none";
						document.getElementById("Book").style.display = "none";
					}
					else if (index == 2){
						document.getElementById("ArticlesW").className = "tablinkscheck";
						document.getElementById("DownW").className = "tablinkschecked";
						document.getElementById("BookW").className = "tablinkscheck";
						document.getElementById("Articles").style.display = "none";
						document.getElementById("Down").style.display = "block";
						document.getElementById("Book").style.display = "none";
					}
					else{
						document.getElementById("ArticlesW").className = "tablinkscheck";
						document.getElementById("DownW").className = "tablinkscheck";
						document.getElementById("BookW").className = "tablinkschecked";
						document.getElementById("Articles").style.display = "none";
						document.getElementById("Down").style.display = "none";
						document.getElementById("Book").style.display = "block";
					}
				}
			//-->
			</script>
		</div>
		<div class="rightlineNo"></div>
		<div class="box_right_box">
			<dl class="bTitle borT"><dd class="newdown"></dd></dl>
		</div>
		<div class="box_right_box">
			<div class="paddingbox">
				<dl class="index">
															<dd class="picbox"><a target="_blank" class="plink" href="http://www.2cto.com/kf/201111/109790.html"><img class='pic1' src='http://up.2cto.com/2011/1101/20111101030653722.jpg'  width='126' height='90' border='0' /></a><span><a href="http://www.2cto.com/kf/201111/109790.html">阿里云手机应用开发点</a></span></dd>
										<dd class="picbox"><a target="_blank" class="plink" href="http://www.2cto.com/kf/201112/113087.html"><img class='pic1' src='http://up.2cto.com/2011/1205/20111205045331102.jpg'  width='126' height='90' border='0' /></a><span><a href="http://www.2cto.com/kf/201112/113087.html">编写高效的android代</a></span></dd>
															<dd class="picline"></dd>
															<dd class="list">&#9642;&nbsp;<a target="_blank" href="http://www.2cto.com/kf/201110/108606.html">Android AIDL 远程服务器使用示例</a></dd>
										<dd class="list">&#9642;&nbsp;<a target="_blank" href="http://www.2cto.com/kf/201111/109790.html">阿里云手机应用开发点滴</a></dd>
										<dd class="list">&#9642;&nbsp;<a target="_blank" href="http://www.2cto.com/kf/201112/113087.html">编写高效的android代码（译文）  </a></dd>
										<dd class="list">&#9642;&nbsp;<a target="_blank" href="http://www.2cto.com/kf/201112/113153.html">给Android应用开发者的十个建议</a></dd>
										<dd class="list">&#9642;&nbsp;<a target="_blank" href="http://www.2cto.com/kf/201112/114445.html">android网络业务的封装与调度 </a></dd>
										<dd class="list">&#9642;&nbsp;<a target="_blank" href="http://www.2cto.com/kf/201202/120041.html">Android_手把手教你写跳跃类游戏(3) </a></dd>
										<dd class="list">&#9642;&nbsp;<a target="_blank" href="http://www.2cto.com/kf/201207/141960.html">Android 4.1 Surface系统变化说明</a></dd>
										<dd class="list">&#9642;&nbsp;<a target="_blank" href="http://www.2cto.com/kf/201212/173349.html">android 实现QQ好友列表（扩展listvi</a></dd>
					</dl>
			</div>
			<div class="xline"></div>
		</div>
		<div class="box_right_line"><div class="xline"></div></div>
		<div style="float:left;width:300px;background:white;padding-left:10px;height:250px">
			<script type="text/javascript">BAIDU_CLB_fillSlot("771043");</script></div>
		<div class="box_right_line"><div class="xline"></div></div>
	</div>
</div>


<script type="text/javascript">
<!--
function showLogin(){
	window.art.dialog({id:'Login',iframe:'http://www.2cto.com/index.php?m=member&c=index&a=login&tupe=mini', title:'快捷登陆', width:'450', height:'310', lock:true}, function(){var d = window.art.dialog({id:'Login'}).data.iframe;var form = d.document.getElementById('dosubmit');form.click();return false;}, function(){window.art.dialog({id:'Login'}).close()});void(0);
}
function add_favorite(title) {
		$.getJSON('http://www.2cto.com/api.php?op=add_favorite&title='+encodeURIComponent(title)+'&url='+encodeURIComponent(location.href)+'&'+Math.random()+'&callback=?', function(data){
			if(data.status==1)	{
				$("#favorite").html('收藏成功');
			} else {
				alert('请登陆');
				window.location.href='http://home.2cto.com/?forward='+encodeURIComponent(location.href);
			}
		});
	}
//-->
</script>
<script language="JavaScript" src="http://www.2cto.com/api.php?op=count&id=221478&modelid=1"></script>
<!-- 广告位：右侧漂浮 -->
<script type="text/javascript">BAIDU_CLB_fillSlot("137946");</script>

<div style="width:980px;padding:8px 0px 8px 0px;margin:auto"><script type="text/javascript">BAIDU_CLB_fillSlot("333829");</script></div>
</div>

<div class="foot">
<p>
<a target="_blank" href="http://www.2cto.com/about">关于我们</a> |
<a target="_blank" href="http://www.2cto.com/about/contact.html">联系我们</a> |
<a target="_blank" href="http://www.2cto.com/about/ads.html">广告服务</a> |
<a target="_blank" href="http://www.2cto.com/about/touzi.html">投资合作</a> |
<a target="_blank" href="http://www.2cto.com/about/Copyright.html">版权申明</a> |
<a target="_blank" href="http://www.2cto.com/about/faq.html">在线帮助</a> |
<a target="_blank" href="http://www.2cto.com/about/map.html">网站地图</a> |
<a target="_blank" href="http://www.2cto.com/about/tg.html">作品发布</a> |
<a target="_blank" href="http://vip.2cto.com/"><span style="COLOR: red">Vip技术培训</span></a>
<br />
<span class="style4">版权所有: <a href="http://www.2cto.com" target="_blank">红黑联盟</a>--致力于做最好的IT技术学习网站<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F1898984a3d796e86ad73ad1f4bc9f240' type='text/javascript'%3E%3C/script%3E"));
</script>    
</span>
</div></body>

</html>
